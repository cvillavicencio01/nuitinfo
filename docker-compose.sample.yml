version: '3.1'

services:
  mongo:
    image: mongo
    restart: always
    ports:
      - 27017:27017
    volumes:
      - ./database:/data/db
    environment:
      MONGO_INITDB_ROOT_USERNAME: username
      MONGO_INITDB_ROOT_PASSWORD: password

  web:
    build: .
    restart: always
    volumes:
      - ./nuitinfo:/var/www
    ports:
      - 8080:8080
    environment:
      MONGO_HOST: mongo
      MONGO_PASSWORD: password
      MONGO_USER: username
      JWT_SECRET: bJC2rlw0IW7XcsV5pWrFvcAK8vlzina1938BN8HmFJ00heK6yXtXMPDglcrZhl
        ### Email deliver
        # set MAIL_SERVICE to "custom" if you want to use SMTP otherwise use a service described here : https://nodemailer.com/smtp/well-known/
        MAIL_SERVICE: Gmail
        MAIL_ADDRESS: mail@example.org
        MAIL_PASSWORD: password
        # Only for SMTP
        MAIL_HOST: smtp.gmail.com
        MAIL_PORT: 465
        # 0 for false and 1 for true
        MAIL_SECURE: 1
    depends_on:
      - mongo

volumes:
  database:
  nuitinfo: